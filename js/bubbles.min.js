var $jscomp={scope:{},checkStringArgs:function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""}};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6-impl","es3");$jscomp.owns=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};
$jscomp.polyfill("Object.assign",function(a){return a?a:function(a,b){for(var d=1;d<arguments.length;d++){var e=arguments[d];if(e)for(var c in e)$jscomp.owns(e,c)&&(a[c]=e[c])}return a}},"es6-impl","es3");var inputText,inputWrap;
function Bubbles(a,c,b){b="undefined"!==typeof b?b:{};animationTime=b.animationTime||200;typeSpeed=b.typeSpeed||5;widerBy=b.widerBy||2;sidePadding=b.sidePadding||6;recallInteractions=b.recallInteractions||0;inputCallbackFn=b.inputCallbackFn||!1;var d="icebreaker",e={},l;try{localStorage.setItem("chat-bubble-storage-test","chat-bubble-storage-test"),localStorage.removeItem("chat-bubble-storage-test"),l=!0}catch(v){console.error("Your server does not allow storing data locally. Most likely it's because you've opened this page from your hard-drive. For testing you can disable your browser's security or start a localhost environment."),
l=!1}var q=l&&0<recallInteractions,f=q&&JSON.parse(localStorage.getItem("chat-bubble-interactions"))||[];interactionsSave=function(a,b){q&&(f.length>recallInteractions&&f.shift(),a.includes("bubble-button")&&"reply reply-freeform"!==b&&"reply reply-pick"!==b||(f.push({say:a,reply:b}),console.log(f)))};interactionsSaveCommit=function(){q&&localStorage.setItem("chat-bubble-interactions",JSON.stringify(f))};a.classList.add("bubble-container");var g=document.createElement("div");g.className="bubble-wrap";
a.appendChild(g);this.typeInput=function(b){inputWrap=document.createElement("div");inputWrap.className="input-wrap";inputText=document.createElement("textarea");inputText.classList.add("inactive");inputText.setAttribute("placeholder","Please enter your input here. \n(max. 400 characters)");inputText.setAttribute("maxlength","400.");inputWrap.appendChild(inputText);inputText.addEventListener("keypress",function(a){13==a.keyCode&&(a.preventDefault(),clearTimeout(r),a=document.querySelectorAll(".bubble.say"),
a=a[a.length-1],a.classList.contains("reply")&&!a.classList.contains("reply-freeform")?a.classList.add("bubble-hidden"):!1,m('<span class="bubble-button bubble-pick">'+this.value+"</span>",function(){},"reply reply-freeform"),"function"===typeof b?b({input:this.value,convo:e,standingAnswer:d}):!1,this.value="")});a.appendChild(inputWrap);g.style.paddingBottom="100px";inputText.focus()};inputCallbackFn?this.typeInput(inputCallbackFn):!1;var k=document.createElement("div");k.className="bubble-typing imagine";
for(dots=0;3>dots;dots++)b=document.createElement("div"),b.className="dot_"+dots+" dot",k.appendChild(b);g.appendChild(k);this.talk=function(a,b){e=Object.assign(e,a);this.reply(e[b]);b?d=b:!1};var t=!1;this.reply=function(a){a=(t="undefined"===typeof a)?e.ice:a;questionsHTML="";if(a){if(void 0!==a.reply){a.reply.reverse();for(var b=0;b<a.reply.length;b++)(function(a,b){questionsHTML+='<span class="bubble-button" style="animation-delay: '+animationTime/2*b+'ms" onClick="'+c+".answer('"+a.answer+"', '"+
a.question+"');this.classList.add('bubble-pick')\">"+a.question+"</span>"})(a.reply[b],b)}u(a.says,function(){k.classList.remove("imagine");""!==questionsHTML?m(questionsHTML,function(){},"reply"):k.classList.add("imagine")})}};this.answer=function(a,b){void 0!==e[a]?(this.reply(e[a]),d=a):"function"===typeof window[a]?window[a]():!1;void 0!==e[a]&&void 0!==b&&interactionsSave('<span class="bubble-button reply-pick">'+b+"</span>","reply reply-pick")};this.think=function(){k.classList.remove("imagine");
this.stop=function(){k.classList.add("imagine")}};var u=function(a,b){for(var c=function(){setTimeout(function(){b()},animationTime)},e=0+a.length-1;0<=e;e--)(function(b,e){c=function(){m(a[e],b)}})(c,e);c()},r=!1,m=function(b,e,c,d){c="undefined"!==typeof c?c:"";var f=(d="undefined"!==typeof d?d:!0)?this.animationTime:0,m=d?this.typeSpeed:0,h=document.createElement("div"),n=document.createElement("span");h.className="bubble imagine "+(d?"":" history ")+c;n.className="bubble-content";n.innerHTML=
b;h.appendChild(n);g.insertBefore(h,k);if(""!==c){for(var p=n.querySelectorAll(".bubble-button"),l=0;l<p.length;l++)(function(a){a.parentNode.parentNode.classList.contains("reply-freeform")||(a.style.width="auto")})(p[l]);h.addEventListener("click",function(a){if(a.target.classList.contains("bubble-button")){for(a=0;a<p.length;a++){var b=p[a];b.style.width="0px";b.style.height="0px";b.style.margin="0px";b.style.border="0px";b.classList.contains("bubble-pick")?b.style.width="":!1;b.classList.contains("bubble-pick")?
b.style.height="":!1;b.classList.contains("bubble-pick")?b.style.margin="":!1;b.classList.contains("bubble-pick")?b.style.border="":!1;b.removeAttribute("onclick")}this.classList.add("bubble-picked")}})}wait=d?2*f:0;minTypingWait=d?6*f:0;b.length*m>f&&""==c&&(wait+=m*b.length,wait<minTypingWait?wait=minTypingWait:!1,setTimeout(function(){k.classList.remove("imagine")},f));d&&setTimeout(function(){k.classList.add("imagine")},wait-2*f);r=setTimeout(function(){h.classList.remove("imagine");var d=n.offsetWidth+
widerBy+"px";h.style.width=""==c?d:"";h.style.width=b.includes("<img src=")?"auto":h.style.width;h.style.width=b.includes("<b")?"auto":h.style.width;h.classList.add("say");e();interactionsSave(b,c);!t&&interactionsSaveCommit();containerHeight=a.offsetHeight;scrollDifference=g.scrollHeight-g.scrollTop;scrollHop=scrollDifference/200;setTimeout(function(){for(var a=1;a<=scrollDifference/scrollHop;a++)(function(){setTimeout(function(){g.scrollHeight-g.scrollTop>containerHeight?g.scrollTop+=scrollHop:
!1},5*a)})()},f/2)},wait+2*f);b.includes('<span class="bubble-button"')&&(b.includes(">0<")||b.includes(">1<")||b.includes(">2<")||b.includes(">3<")||b.includes(">4<"))&&updateBalloonHovers()};for(b=0;b<f.length;b++)m(f[b].say,function(){},f[b].reply,!1)}
function updateBalloonHovers(){var a=document.querySelectorAll("span.bubble-button");for(i=0;i<a.length;i++)"0"==a[i].innerHTML?updateAttr(a[i],"I don't agree that this is a usability problem at all.","up-right","medium"):"1"==a[i].innerHTML?updateAttr(a[i],"This is a cosmetic problem. It does not need to be fixed unless there is extra time available on the project.","up-right","medium"):"2"==a[i].innerHTML?updateAttr(a[i],"This is a minor usability problem. Fixing this should be given low priority.",
"up-right","medium"):"3"==a[i].innerHTML?updateAttr(a[i],"This is a major usability problem. It is important to fix, so it should be given high priority.","up-right","medium"):"4"==a[i].innerHTML&&updateAttr(a[i],"This is a usability catastrophe. Releasing this design before fixing this would be a disaster.","up-right","medium")};
