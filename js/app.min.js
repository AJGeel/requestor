/*
 Serialize all form data into a query string
 (c) 2018 Chris Ferdinandi, MIT License, https://gomakethings.com
 @param  {Node}   form The form to serialize
 @return {String}      The serialized form data
*/
var $jscomp={scope:{},checkStringArgs:function(a,c,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""}};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[c]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,d,b){if(c){d=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var e=a[b];e in d||(d[e]={});d=d[e]}a=a[a.length-1];b=d[a];c=c(b);c!=b&&null!=c&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,d){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,d||0)}},"es6-impl","es3");
var windowWidth=document.getElementById("window-width"),DOM_iFrame=document.getElementById("iframe_prototype"),DOM_iFrame_Container=document.getElementById("frame_container"),Figma_URI="ejJw4AVHI1kAIktWxJzYDb",Figma_Node_ID="%253A2%26",Figma_Viewport="497%252C275%252C0.2620800733566284",Figma_Scaling="scale-down-width",DOM_Body=document.getElementById("body"),startTime=Date.now(),timeSpentTotal=0,timeSpentOnOnboarding=0,timeSpentOnScenario=0,timeSpentOnEvaluation=0,completedScenario=0,evaluationContainer=
document.getElementById("evaluation_container");window.onscroll=function(){trackScrollPercentage()};window.addEventListener("resize",resizeiFrame);resizeiFrame();document.addEventListener("keypress",function(a){});for(var textAreas=document.getElementsByTagName("textarea"),i=0;i<textAreas.length;i++)textAreas[i].setAttribute("style","height:"+textAreas[i].scrollHeight+"px; overflow-y:hidden;"),textAreas[i].addEventListener("input",OnInput,!1);evaluationContainer.addEventListener("mouseenter",function(a){animation.setSpeed(.2)});
evaluationContainer.addEventListener("mouseleave",function(a){animation.setSpeed(1)});var onboardingBtn=document.querySelector(".onboarding-btn"),invitationImg=document.getElementById("invitationImg"),onboardingBg=document.querySelector(".onboarding-wrapper");onboardingBtn.addEventListener("mouseenter",function(a){invitationImg.classList.toggle("hover");onboardingBg.style.transition="background-color .6s ease-in-out";onboardingBg.classList.toggle("hover")});
onboardingBtn.addEventListener("mouseleave",function(a){invitationImg.classList.toggle("hover");onboardingBg.classList.toggle("hover")});var animation=lottie.loadAnimation({container:document.getElementById("lottie-point-right"),renderer:"svg",loop:!0,autoplay:!0,path:"/i/lottie/data.json"}),form=document.querySelector("form"),submittedBefore=!1,formChanged=!1;form.addEventListener("change",function(){return formChanged=!0});
window.addEventListener("beforeunload",function(a){formChanged&&(a.returnValue="You have unfinished changes!")});checkUID();function trackScrollPercentage(){var a=(document.body.scrollTop||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100;document.getElementById("progress-bar").style.width=a+"%"}
function updateiFrame(a,c,d,b,e){e.src="https://www.figma.com/embed?embed_host=share&url=https://www.figma.com/proto/"+a+"%3Fnode-id%3D"+c+"%26viewport%3D"+d+"%26scaling%3D"+b;resizeiFrame()}function resizeiFrame(){DOM_iFrame.width=DOM_iFrame_Container.clientWidth-40;DOM_iFrame.height=DOM_iFrame_Container.clientHeight-40;windowWidth.innerHTML=840==window.innerWidth?"exactly "+window.innerWidth:"only "+window.innerWidth}function toggleClass(a,c){a.classList.toggle(c)}
function checkTimeElapsed(){return Math.floor((Date.now()-startTime)/1E3)}function OnInput(){this.style.height="auto";this.style.height=this.scrollHeight+"px"}
function formProgressiveDisclosure(a,c,d){if("nielsen"==d){var b=document.getElementById("h"+c+"_prog");b.querySelectorAll("textarea");if(0==a)b.style.height="0px",b.style.opacity="0",b.querySelectorAll("textarea").forEach(function(a){a.disabled=!0}),setTimeout(function(){b.style.visibility="hidden"},300);else if(1==a||2==a||3==a||4==a)for(b.style.height="316px",b.style.opacity="1",b.style.visibility="visible",setTimeout(function(){b.style.height="auto"},1E3),b.querySelectorAll("textarea").forEach(function(a){a.disabled=
!1}),a=0;a<textAreas.length;a++)textAreas[a].style.height="auto"}}function reviewInvitation(){var a=document.querySelector(".onboarding-wrapper");a.classList.add("destroy-modal-1s");setTimeout(function(){a.remove()},2E3);evaluationContainer.style.height="initial";evaluationContainer.style.overflowY="visible"}function declineInvitation(){1==confirm("Are you sure you want to decline this invitation? This will close the current window.")&&(window.location.href="../../index.php")}
function startEvaluation(){var a=document.getElementById("frame");a.style.transition="filter 2s ease-in-out, opacity 2s ease-in-out";a.style.filter="blur(0px)";a.style.opacity="1";a=document.getElementById("startEvaluationBtn");a.classList.add("destroy-button");a=a.previousElementSibling;a.style.transition="margin-bottom .5s ease-in-out";a.style.marginBottom="-4.4em";var c=document.getElementById("frameModal");c.classList.add("destroy-modal");setTimeout(function(){c.remove()},2E3);timeSpentOnOnboarding=
checkTimeElapsed();updateFormValue("time_spent_on_onboarding",timeSpentOnOnboarding);a=document.getElementsByClassName("scenario_indicator")[0];toggleVisibility(a)}
function serialize(a){for(var c=[],d=0;d<a.elements.length;d++){var b=a.elements[d];if(b.name&&!b.disabled&&"file"!==b.type&&"reset"!==b.type&&"submit"!==b.type&&"button"!==b.type)if("select-multiple"===b.type)for(var e=0;e<b.options.length;e++)b.options[e].selected&&c.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.options[e].value));else("checkbox"!==b.type&&"radio"!==b.type||b.checked)&&c.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}return c.join("&")}
function validateForm(a){timeSpentOnEvaluation=checkTimeElapsed()-timeSpentOnScenario-timeSpentOnOnboarding;updateFormValue("time_spent_on_evaluation",timeSpentOnEvaluation);timeSpentTotal=checkTimeElapsed();updateFormValue("time_spent_total",timeSpentTotal);if("nielsen"==a){a=serialize(form);for(var c=formChanged=!1,d=[],b=1;10>=b;b++)1!=a.includes("heu_"+b)&&(c=!0,d.push(b),console.log("Heuristic "+b+" is incomplete."));if(1==c&&0==submittedBefore){for(alert("Not all heuristics were completed. However, you may still submit your results. To do so, click the button again.");i<=
d.length;i++)console.log("Heuristic "+i+";");submittedBefore=!0}else form.action="backend/form_handler.php"}}function setCookie(a,c,d){var b=new Date;b.setTime(b.getTime()+864E5*d);d="expires="+b.toUTCString();document.cookie=a+"="+c+";"+d+";path=/"}function getCookie(a){a+="=";for(var c=decodeURIComponent(document.cookie).split(";"),d=0;d<c.length;d++){for(var b=c[d];" "==b.charAt(0);)b=b.substring(1);if(0==b.indexOf(a))return b.substring(a.length,b.length)}return""}
function checkUID(){var a=getCookie("temp_uid");""!=a&&null!=a||setCookie("temp_uid",generateRandom(9999999),7);form_user_id.value=getCookie("temp_uid")}function checkCookiesAccepted(){getCookie("accepted_cookies")}function generateRandom(a){return Math.floor(Math.random()*a)}function updateFormValue(a,c){document.getElementsByName(""+a)[0].value=""+c}
function finishedScenario(a,c){updateFormValue("completed_scenario",c);timeSpentOnScenario=checkTimeElapsed()-timeSpentOnOnboarding;updateFormValue("time_spent_on_scenario",timeSpentOnScenario);a.parentElement.parentElement.remove();toggleVisibility(form);document.getElementById("general_impression").style.height="auto";0==c&&(document.getElementById("conditionalContent").innerHTML="You weren't able to complete the scenario. That's not a problem at all, this project is not finished and therefore not perfect.")}
function show(a){var c=function(){a.style.display="block";var c=a.scrollheight+"px";a.style.display="";return c}();a.classList.add("is-visible");a.style.height=c;window.setTimeout(function(){a.style.height=""},350)}function hide(a){a.style.height=a.scrollheight="px";window.setTimeout(function(){a.style.height="0"},1);window.setTimeout(function(){a.classList.remove("is-visible")},350)}function toggleVisibility(a){a.classList.contains("is-visible")?hide(a):show(a)};
